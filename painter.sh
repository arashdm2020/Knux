#!/bin/bash

# --- تنظیمات اولیه ---
REPO_DIR="." # پوشه ریپازیتوری فعلی
START_DATE=$(date -d "1 year ago" +%s) # تاریخ شروع: دقیقا یک سال پیش
cd $REPO_DIR || exit
git init # اطمینان از اینکه گیت راه‌اندازی شده

# --- الگوی نام "Arash dolati" ---
# 1 = یک کامیت (سبز روشن), 0 = بدون کامیت
# توجه: این آرایه باید با طرح شما مطابقت داشته باشد
PATTERN=(
  [0,0]=0  [0,1]=1  [0,2]=1  [0,3]=1  [0,4]=0  [0,5]=0  [0,6]=0  [0,7]=0  [0,8]=0  [0,9]=0  [0,10]=0 [0,11]=0 [0,12]=0 [0,13]=0 [0,14]=0 [0,15]=0 [0,16]=0 [0,17]=0 [0,18]=0 [0,19]=0 [0,20]=0 [0,21]=0 [0,22]=0 [0,23]=0 [0,24]=0 [0,25]=0 [0,26]=1  [0,27]=0 [0,28]=0  [0,29]=0 [0,30]=1  [0,31]=1  [0,32]=1  [0,33]=1  [0,34]=0 [0,35]=0
  [1,0]=0  [1,1]=1  [1,2]=1  [1,3]=1  [1,4]=0  [1,5]=0  [1,6]=0  [1,7]=0  [1,8]=0  [1,9]=0  [1,10]=0 [1,11]=0 [1,12]=0 [1,13]=0 [1,14]=1  [1,15]=0 [1,16]=0 [1,17]=0 [1,18]=0 [1,19]=0 [1,20]=0 [1,21]=1  [1,22]=0 [1,23]=1  [1,24]=1  [1,25]=0 [1,26]=1  [1,27]=0 [1,28]=0  [1,29]=0 [1,30]=1  [1,31]=0  [1,32]=0  [1,33]=0  [1,34]=0 [1,35]=0
  [2,0]=0  [2,1]=1  [2,2]=1  [2,3]=1  [2,4]=0  [2,5]=1  [2,6]=1  [2,7]=0  [2,8]=1  [2,9]=1  [2,10]=0 [2,11]=1  [2,12]=1  [2,13]=0 [2,14]=1  [2,15]=1  [2,16]=0 [2,17]=0 [2,18]=0 [2,19]=1  [2,20]=1  [2,21]=1  [2,22]=0 [2,23]=1  [2,24]=0  [2,25]=0 [2,26]=1  [2,27]=0 [2,28]=1  [2,29]=1  [2,30]=0  [2,31]=1  [2,32]=0  [2,33]=0  [2,34]=0 [2,35]=0
  [3,0]=0  [3,1]=1  [3,2]=0  [3,3]=1  [3,4]=0  [3,5]=1  [3,6]=0  [3,7]=0  [3,8]=1  [3,9]=1  [3,10]=0 [3,11]=1  [3,12]=0  [3,13]=0 [3,14]=1  [3,15]=1  [3,16]=0 [3,17]=0 [3,18]=0 [3,19]=1  [3,20]=1  [3,21]=0  [3,22]=0 [3,23]=1  [3,24]=1  [3,25]=0 [3,26]=1  [3,27]=0 [3,28]=1  [3,29]=1  [3,30]=0  [3,31]=1  [3,32]=0  [3,33]=0  [3,34]=1  [3,35]=0
  [4,0]=0  [4,1]=1  [4,2]=0  [4,3]=1  [4,4]=0  [4,5]=0  [4,6]=0  [4,7]=0  [4,8]=1  [4,9]=1  [4,10]=0 [4,11]=1  [4,12]=1  [4,13]=0 [4,14]=1  [4,15]=0 [4,16]=0 [4,17]=0 [4,18]=0 [4,19]=1  [4,20]=1  [4,21]=1  [4,22]=0 [4,23]=1  [4,24]=0  [4,25]=0 [4,26]=1  [4,27]=0 [4,28]=1  [4,29]=1  [4,30]=0  [4,31]=1  [4,32]=0  [4,33]=0  [4,34]=0 [4,35]=0
  [5,0]=0  [5,1]=1  [5,2]=0  [5,3]=1  [5,4]=0  [5,5]=0  [5,6]=0  [5,7]=0  [5,8]=0  [5,9]=0  [5,10]=0 [5,11]=0 [5,12]=0 [5,13]=0 [5,14]=0 [5,15]=0 [5,16]=0 [5,17]=0 [5,18]=0 [5,19]=0 [5,20]=0 [5,21]=0 [5,22]=0 [5,23]=0 [5,24]=0 [5,25]=0 [5,26]=0  [5,27]=0 [5,28]=0  [5,29]=0 [5,30]=0  [5,31]=0  [5,32]=0  [5,33]=0  [5,34]=0 [5,35]=0
  [6,0]=0  [6,1]=0  [6,2]=0  [6,3]=0  [6,4]=0  [6,5]=0  [6,6]=0  [6,7]=0  [6,8]=0  [6,9]=0  [6,10]=0 [6,11]=0 [6,12]=0 [6,13]=0 [6,14]=0 [6,15]=0 [6,16]=0 [6,17]=0 [6,18]=0 [6,19]=0 [6,20]=0 [6,21]=0 [6,22]=0 [6,23]=0 [6,24]=0 [6,25]=0 [6,26]=0  [6,27]=0 [6,28]=0  [6,29]=0 [6,30]=0  [6,31]=0  [6,32]=0  [6,33]=0  [6,34]=0 [6,35]=0
);

# --- حلقه اصلی برای ساخت کامیت‌ها ---
echo "شروع ساخت تاریخچه کامیت..."
for week in {0..51}; do
  for day in {0..6}; do
    # محاسبه تاریخ دقیق برای هر سلول
    days_to_add=$((week * 7 + day))
    commit_date=$(date -d "@$((START_DATE + days_to_add * 86400))" +"%Y-%m-%d %H:%M:%S")
    
    # گرفتن مقدار از الگو
    value=${PATTERN[$day,$week]}
    
    # اگر مقدار 1 بود، یک کامیت بساز
    if [[ $value -eq 1 ]]; then
      echo "Commit for $commit_date"
      echo "$commit_date" > contribution.txt
      git add contribution.txt
      GIT_AUTHOR_DATE="$commit_date" GIT_COMMITTER_DATE="$commit_date" git commit -m "commit for $commit_date"
    fi
  done
done

echo "تاریخچه کامیت با موفقیت ساخته شد."